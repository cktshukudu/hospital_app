{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>
<body>
   {% block content %}
    <div class="wrapper">
       <div class="section">
    <div class="top_navbar">
      <div class="hamburger">
        <a href="#">
          <i class="fas fa-bars"></i>
        </a>
      </div>
    </div>
    <div class="container">
        <h1>Doctor's</h1><br>
        <input placeholder="Search" name="search" id="search" /><br>
        <div class="grid-container" id="view"> <br><br>
          {% for doctor in doctors %}
          <div class="grid-item" id="doctor">
            <input type="hidden" value="{{doctor.id}}" id="uid" />
            <img src="{% static 'images/profile.png' %}" alt="Image" width="100px">
            <h3 id="name">Dr. {{doctor.Fnames}} {{doctor.Lname}}</h3>
            <p id="spec">{{doctor.Specialization}}</p>
            <p id="rate">{{doctor.Rates}} ({{doctor.NumOfRates}} reviews)</p>
          </div>
          {% endfor %}
        </div>
    
        <script>
          var search = document.getElementById("search");
          var Name = document.getElementById("name");
          var spec = document.getElementById("spec");
          var rate = document.getElementById("rate");
          var grid = document.getElementById("view");
          var doctors = grid.getElementsByClassName("grid-item");
          var doc = [];
          for(i = 0; i<doctors.length;i++)
          {
            doc.push(doctors[i])
            
          }
          doc.forEach(doctor =>
          {
            doctor.addEventListener("click", () => {
              var doc_id = doctor.children[0].value;
              console.log(doc_id)
              window.location.href = './'+doc_id+'/details'
            });
          })
          
          
    
          search.addEventListener("input", () => {
            for (i = 0; i < doctors.length; i++) {
              doctor = doctors[i];
              fieldOne = doctor[0];
              name = doctor.querySelector("#name").textContent;
              Spec = doctor.querySelector("#spec").textContent;
              Rate = doctor.querySelector("#rate").textContent;
              if (name.includes(search.value)) {
                condition = true;
                doctor.style.display = "";
              } else {
                doctor.style.display = "none";
              }
            }
          });
        </script>
    </div>
  </div>
  <div class="sidebar">
    <div class="profile">
      <img src="{% static 'images/profile.png' %}" alt="Image">
        <h3>Tlou</h3>
        <p>Admin</p>
    </div>
    <ul>
        <li>
            <a href="#">
                <span class="icon"><i class="fas fa-home"></i></span>
                <span class="item">Home</span>
            </a>
        </li>
        <li>
            <a href="dashboards">
                <span class="icon"><i class="fas fa-desktop"></i></span>
                <span class="item">Dashboard</span>
            </a>
        </li>
        <li>
            <a href="index" >
                <span class="icon"><i class="fas fa-edit"></i></span>
                <span class="item">Appointment</span>
            </a>
        </li>
        <li>
            <a href="admin1">
                <span class="icon"><i class="fas fa-chart-line"></i></span>
                <span class="item">Feedback Report</span>
            </a>
        </li>
   
        <li>
            <a href="#">
                <span class="icon"><i class="fas fa-cog"></i></span>
                <span class="item">Settings</span>
            </a>
        </li>
    </ul>
</div>
 {% endblock %}
</body>
</html>